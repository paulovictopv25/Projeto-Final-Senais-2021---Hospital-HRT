<!doctype html>
<html lang="pt-br">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie-edge">
  <meta name="author" content="Paulo Victor">
  
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">

     <form th:action="@{/logout}" method="post">
        <input type="submit" class="btn btn-danger" value="Sair" />
<head>
    <title>Painel Centro Cirurgico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>



    <script>
        lsUser = []
        function listAllUser() {

            const xhttp = new XMLHttpRequest();
            xhttp.open("GET", `/user/`);
            xhttp.send();
            xhttp.onload = function () {
                lsUser = JSON.parse(this.responseText);
                out = "";
                for (const i in lsUser) {
                    console.log(lsUser[i])
                    u = lsUser[i]
                    out += `<tr onclick='activate(${i})'><td>${u.name}</td>
                                                        <td>${u.status}</td>
                                                        <td>${u.local}</td>
                                                        <td>${u.propsedTime}</td>
                                                        <td>${u.actualStartTime}</td>
                                                        <td>${u.endTime}</td>
                                                        <td>${u.exitTime}</td>
                            </tr>`;
                }
                document.getElementById("tbody").innerHTML = out;
            }
        }


        var myVar = setInterval(listAllUser, 1000);
        function myTimer() {
            var d = new Date();
            document.getElementById("refresh-timer").innerHTML = d.getDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear() + ' ' + d.toLocaleTimeString();

            //var tabela = localStorage.getItem('tbody');

            document.getElementById("tbody").innerHTML = tabela;
        }
        documento.myTimer();


    </script>
    <div class="container mt-3">
        <div class="=row">
            <div class="d-flex justify-content-start col">
                <img src="https://i0.wp.com/agroemdia.com.br/wp-content/uploads/2018/03/logo-sec-saude-df.png?w=985&ssl=1"
                    alt="" width="200" height="100">
            </div>

        </div>


        <div>
            <form>
                <h5> Regional Hospital Taguatinga | Secretaria de Estado de Saúde do Distrito Federal |<span
                        id="refresh-timer"></span></h5>
        </div>
        <div class="col">
            <a href="/manager" class="btn btn-primary" role="button">Voltar ao Gerenciador</a>





            <div class="container mt-3">
                <table class="table table-hover" style="cursor: pointer;">
                    <thead class="table-success">
                        <tr>
                            <th width="39%">Nome do Paciente</th>
                            <th width="20%">Status</th>
                            <th width="20%">Local</th>
                            <th width="10%">Início Previsto</th>
                            <th width="10%">Início Cirurgia</th>
                            <th width="10%">Fim da Cirurgia</th>
                            <th width="10%">Saída da Cirurgia</th>
                        </tr>
                    </thead>
                    <tbody id="tbody">

                    </tbody>
                </table>
                </form>
            </div>
        </div>

        <script>listAllUser();</script>
</body>

</html>